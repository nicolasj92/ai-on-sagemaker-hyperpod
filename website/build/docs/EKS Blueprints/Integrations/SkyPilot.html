<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-EKS Blueprints/Integrations/SkyPilot/SkyPilot" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">SkyPilot setup and usage | AI on Sagemaker Hyperpod</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://awslabs.github.io/img/header_background.png"><meta data-rh="true" name="twitter:image" content="https://awslabs.github.io/img/header_background.png"><meta data-rh="true" property="og:url" content="https://awslabs.github.io/docs/EKS Blueprints/Integrations/SkyPilot"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="keyworkds" content="machine learning, generative ai, genai, sagemaker, hyperpod, sagemaker hyperpod,         model training, model inference, nemo framework, pytorch, pytorch framework"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="SkyPilot setup and usage | AI on Sagemaker Hyperpod"><meta data-rh="true" name="description" content="Setup SkyPilot"><meta data-rh="true" property="og:description" content="Setup SkyPilot"><link data-rh="true" rel="icon" href="/img/Amazon-Sagemaker-Icon.jpg"><link data-rh="true" rel="canonical" href="https://awslabs.github.io/docs/EKS Blueprints/Integrations/SkyPilot"><link data-rh="true" rel="alternate" href="https://awslabs.github.io/docs/EKS Blueprints/Integrations/SkyPilot" hreflang="en"><link data-rh="true" rel="alternate" href="https://awslabs.github.io/docs/EKS Blueprints/Integrations/SkyPilot" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"EKS Blueprints","item":"https://awslabs.github.io/docs/category/eks-blueprints"},{"@type":"ListItem","position":2,"name":"Integrations","item":"https://awslabs.github.io/docs/category/integrations"},{"@type":"ListItem","position":3,"name":"SkyPilot setup and usage","item":"https://awslabs.github.io/docs/EKS Blueprints/Integrations/SkyPilot/"}]}</script><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="AI on Sagemaker Hyperpod RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="AI on Sagemaker Hyperpod Atom Feed"><link rel="stylesheet" href="/assets/css/styles.61e3011e.css">
<script src="/assets/js/runtime~main.7b03ec20.js" defer="defer"></script>
<script src="/assets/js/main.542118a5.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/Amazon-Sagemaker-Icon.jpg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/Amazon-Sagemaker-Icon.jpg" alt="AI on Sagemaker Hyperpod" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/Amazon-Sagemaker-Icon.jpg" alt="AI on Sagemaker Hyperpod" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">AI on Sagemaker Hyperpod</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/Introduction">Workshop</a><a class="navbar__item navbar__link" href="/resources">Resources</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/awslabs/ai-on-sagemaker-hyperpod" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Introduction">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/getting-started">Getting Started</a><button aria-label="Expand sidebar category &#x27;Getting Started&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/docs/category/eks-blueprints">EKS Blueprints</a><button aria-label="Collapse sidebar category &#x27;EKS Blueprints&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/category/training">Training</a><button aria-label="Expand sidebar category &#x27;Training&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/category/fine-tuning">Fine Tuning</a><button aria-label="Expand sidebar category &#x27;Fine Tuning&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/category/inference">Inference</a><button aria-label="Expand sidebar category &#x27;Inference&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/category/resiliency">Resiliency</a><button aria-label="Expand sidebar category &#x27;Resiliency&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/category/task-governance">Task Governance</a><button aria-label="Expand sidebar category &#x27;Task Governance&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/category/observability">Observability</a><button aria-label="Expand sidebar category &#x27;Observability&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/docs/category/integrations">Integrations</a><button aria-label="Collapse sidebar category &#x27;Integrations&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/EKS Blueprints/Integrations/Ray">Ray</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/EKS Blueprints/Integrations/SkyPilot">SkyPilot setup and usage</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/slurm-blueprints">SLURM Blueprints</a><button aria-label="Expand sidebar category &#x27;SLURM Blueprints&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/dashboards">Dashboards</a><button aria-label="Expand sidebar category &#x27;Dashboards&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/tools">Tools</a><button aria-label="Expand sidebar category &#x27;Tools&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/diagrams">Diagrams</a><button aria-label="Expand sidebar category &#x27;Diagrams&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/infrastructure-as-a-code">Infrastructure as a Code</a><button aria-label="Expand sidebar category &#x27;Infrastructure as a Code&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/docs/category/eks-blueprints"><span>EKS Blueprints</span></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/docs/category/integrations"><span>Integrations</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">SkyPilot setup and usage</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Installing SkyPilot and integrating SLURM and EKS</h1></header>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="setup-skypilot">Setup SkyPilot<a href="#setup-skypilot" class="hash-link" aria-label="Direct link to Setup SkyPilot" title="Direct link to Setup SkyPilot">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="install-skypilot-with-kubernetes-support">Install SkyPilot with Kubernetes Support<a href="#install-skypilot-with-kubernetes-support" class="hash-link" aria-label="Direct link to Install SkyPilot with Kubernetes Support" title="Direct link to Install SkyPilot with Kubernetes Support">​</a></h3>
<p>Start by installing SkyPilot with Kubernetes support using pip:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pip install skypilot-nightly[kubernetes]</span><br></span></code></pre></div></div>
<p>This installs the latest nightly build of SkyPilot, which includes the necessary Kubernetes integrations.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="connect-to-your-sagemaker-hyperpod-eks-cluster">Connect to Your SageMaker HyperPod EKS Cluster<a href="#connect-to-your-sagemaker-hyperpod-eks-cluster" class="hash-link" aria-label="Direct link to Connect to Your SageMaker HyperPod EKS Cluster" title="Direct link to Connect to Your SageMaker HyperPod EKS Cluster">​</a></h3>
<p>First, configure your kubectl to connect to your EKS cluster:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">aws eks update-kubeconfig --name $EKS_CLUSTER_NAME --region $EKS_REGION</span><br></span></code></pre></div></div>
<p>Replace <code>$EKS_CLUSTER_NAME</code> and <code>$EKS_REGION</code> with your specific EKS cluster name and AWS region.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="verify-skypilots-connection-to-the-kubernetes-cluster">Verify SkyPilot&#x27;s Connection to the Kubernetes Cluster<a href="#verify-skypilots-connection-to-the-kubernetes-cluster" class="hash-link" aria-label="Direct link to Verify SkyPilot&#x27;s Connection to the Kubernetes Cluster" title="Direct link to Verify SkyPilot&#x27;s Connection to the Kubernetes Cluster">​</a></h3>
<p>Check if SkyPilot can connect to your Kubernetes cluster:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sky check k8s</span><br></span></code></pre></div></div>
<p>The output should look similar to:</p>
<p><img decoding="async" loading="lazy" alt="Verify SkyPilot&amp;#39;s Connection to the Cluster" src="/assets/images/sky_check-6fbb237db20099351d59498e6fe22a8c.png" width="1695" height="323" class="img_ev3q"></p>
<p>If this is your first time using SkyPilot with this Kubernetes cluster, you may see a hint to create GPU labels for your nodes. Follow the instructions by running:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">python -m sky.utils.kubernetes.gpu_labeler --context &lt;your-eks-context&gt;</span><br></span></code></pre></div></div>
<p>This script helps SkyPilot identify what GPU resources are available on each node in your cluster.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="discover-available-gpus-in-the-cluster">Discover Available GPUs in the Cluster<a href="#discover-available-gpus-in-the-cluster" class="hash-link" aria-label="Direct link to Discover Available GPUs in the Cluster" title="Direct link to Discover Available GPUs in the Cluster">​</a></h3>
<p>To see what GPU resources are available in your SageMaker HyperPod cluster:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sky show-gpus --cloud k8s</span><br></span></code></pre></div></div>
<p>This will list all available GPU types and their counts:</p>
<p><img decoding="async" loading="lazy" alt="Available GPUs" src="/assets/images/sky_show-83eef74a531f5cdca48c3229c851e2e0.png" width="1553" height="305" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="using-skypilot-interactively">Using SkyPilot interactively<a href="#using-skypilot-interactively" class="hash-link" aria-label="Direct link to Using SkyPilot interactively" title="Direct link to Using SkyPilot interactively">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="launch-an-interactive-development-environment">Launch an Interactive Development Environment<a href="#launch-an-interactive-development-environment" class="hash-link" aria-label="Direct link to Launch an Interactive Development Environment" title="Direct link to Launch an Interactive Development Environment">​</a></h3>
<p>You can also launch a SkyPilot cluster for interactive development:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sky launch -c dev --gpus H100</span><br></span></code></pre></div></div>
<p>This command creates a development environment named &quot;dev&quot; with a single H100 GPU. SkyPilot handles the pod creation, resource allocation, and setup of the development environment.</p>
<p><img decoding="async" loading="lazy" alt="Interactive Mode" src="/assets/images/sky_interactive-5cfc59a3cffcb19cd443bcc2ad51963b.png" width="1547" height="349" class="img_ev3q"></p>
<p>Once launched, you can connect to your development environment:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ssh dev</span><br></span></code></pre></div></div>
<p>This gives you an interactive shell in your development environment, where you can run your code, install packages, and perform ML experiments.</p>
<p><img decoding="async" loading="lazy" alt="SkyPilot interactive" src="/assets/images/sky_ssh-ca679874ec7a5e2978085b8356be8f81.png" width="1393" height="354" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="launching-training-jobs-using-skypilot">Launching training jobs using SkyPilot<a href="#launching-training-jobs-using-skypilot" class="hash-link" aria-label="Direct link to Launching training jobs using SkyPilot" title="Direct link to Launching training jobs using SkyPilot">​</a></h2>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="creating-and-submitting-your-training-job">Creating and submitting your training job<a href="#creating-and-submitting-your-training-job" class="hash-link" aria-label="Direct link to Creating and submitting your training job" title="Direct link to Creating and submitting your training job">​</a></h2>
<p>SkyPilot makes it easy to run distributed training jobs on your SageMaker HyperPod cluster. Here&#x27;s an example of launching a distributed training job on a single p5.48xlarge instance using a YAML configuration file:</p>
<p>First, create a file named train.yaml with your training job configuration:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">resources</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">accelerators</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> H100</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">8</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">num_nodes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">setup</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token scalar string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">    git clone --depth 1 https://github.com/pytorch/examples || true</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">    cd examples</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">    git filter-branch --prune-empty --subdirectory-filter distributed/minGPT-ddp</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">    uv venv --python 3.10</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">    source .venv/bin/activate</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">    uv pip install -r requirements.txt &quot;numpy&lt;2&quot; &quot;torch==1.12.1+cu113&quot; --extra-index-url https://download.pytorch.org/whl/cu113</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">run</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token scalar string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">    cd examples</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">    source .venv/bin/activate</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">    cd mingpt</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">    export LOGLEVEL=INFO</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    MASTER_ADDR=$(echo &quot;$SKYPILOT_NODE_IPS&quot; </span><span class="token punctuation" style="color:#393A34">|</span><span class="token plain"> head </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">n1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo &quot;Starting distributed training</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">head node</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $MASTER_ADDR&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    torchrun \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">nnodes=$SKYPILOT_NUM_NODES \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">nproc_per_node=$SKYPILOT_NUM_GPUS_PER_NODE \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">master_addr=$MASTER_ADDR \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">master_port=8008 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">node_rank=$</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">SKYPILOT_NODE_RANK</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    main.py</span><br></span></code></pre></div></div>
<p>Then launch your training job:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sky launch -c train train.yaml</span><br></span></code></pre></div></div>
<p>This will create a distributed training job that using 1 p5.48xlarge nodes, each with 8 H100 NVIDIA GPUs. You can monitor the output with:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sky logs train</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="running-multi-node-training-jobs-with-efa">Running Multi-node Training Jobs with EFA<a href="#running-multi-node-training-jobs-with-efa" class="hash-link" aria-label="Direct link to Running Multi-node Training Jobs with EFA" title="Direct link to Running Multi-node Training Jobs with EFA">​</a></h3>
<p>For multi-node training, we leverage the Elastic Fabric Adapter (EFA). Elastic Fabric Adapter (EFA) is a network interface for Amazon EC2 instances that enables you to run applications requiring high levels of inter-node communications at scale on AWS. Its custom-built operating system bypass hardware interface enhances the performance of inter-instance communications, which is critical to scaling these applications. With EFA, High Performance Computing (HPC) applications using the Message Passing Interface (MPI) and Machine Learning (ML) applications using NVIDIA Collective Communications Library (NCCL) can scale to thousands of CPUs or GPUs. As a result, you get the application performance of on-premises HPC clusters with the on-demand elasticity and flexibility of the AWS cloud. Integrating EFA with applications running on Amazon EKS clusters can reduce the time to complete large scale distributed training workloads without having to add additional instances to your cluster.</p>
<p>Below is a code snippet showcasing how to run the NCCL tests across 2 p5.48xlarge nodes with EFA configuration in SkyPilot job:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nccl</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">test</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">efa</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">resources</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">cloud</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> kubernetes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">accelerators</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> H100</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">8</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">image_id</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> docker</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">public.ecr.aws/hpc</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">cloud/nccl</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">tests</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">num_nodes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">envs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">USE_EFA</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;true&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">run</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token scalar string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">  if [ &quot;${SKYPILOT_NODE_RANK}&quot; == &quot;0&quot; ]; then</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">    echo &quot;Head node&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Total number of processes, NP should be the total number of GPUs in the cluster</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    NP=$(($SKYPILOT_NUM_GPUS_PER_NODE * $SKYPILOT_NUM_NODES))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Append :${SKYPILOT_NUM_GPUS_PER_NODE} to each IP as slots</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    nodes=&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    for ip in $SKYPILOT_NODE_IPS; do</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      nodes=&quot;$</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">nodes</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">$</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">ip</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">$</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">SKYPILOT_NUM_GPUS_PER_NODE</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    done</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    nodes=$</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">nodes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">-1</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">echo &quot;All nodes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">nodes</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Set environment variables</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    export PATH=$PATH</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">/usr/local/cuda</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">12.2/bin</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">/opt/amazon/efa/bin</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">/usr/bin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    export LD_LIBRARY_PATH=/usr/local/cuda</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">12.2/lib64</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">/opt/amazon/openmpi/lib</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">/opt/nccl/build/lib</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">/opt/amazon/efa/lib</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">/opt/aws</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">ofi</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">nccl/install/lib</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">/usr/local/nvidia/lib</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">$LD_LIBRARY_PATH</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    export NCCL_HOME=/opt/nccl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    export CUDA_HOME=/usr/local/cuda</span><span class="token punctuation" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">12.2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    export NCCL_DEBUG=INFO</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    export NCCL_BUFFSIZE=8388608</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    export NCCL_P2P_NET_CHUNKSIZE=524288</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    export NCCL_TUNER_PLUGIN=/opt/aws</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">ofi</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">nccl/install/lib/libnccl</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">ofi</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">tuner.so</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> &quot;$</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">USE_EFA</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">&quot; == &quot;true&quot; </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">; then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      export FI_PROVIDER=&quot;efa&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    else</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      export FI_PROVIDER=&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /opt/amazon/openmpi/bin/mpirun \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">allow</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">run</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">as</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">root \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">tag</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">output \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">H $nodes \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">np $NP \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">N $SKYPILOT_NUM_GPUS_PER_NODE \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">bind</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">to none \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">x FI_PROVIDER \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">x PATH \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">x LD_LIBRARY_PATH \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">x NCCL_DEBUG=INFO \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">x NCCL_BUFFSIZE \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">x NCCL_P2P_NET_CHUNKSIZE \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">x NCCL_TUNER_PLUGIN \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">mca pml ^cm</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">ucx \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">mca btl tcp</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">self \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">mca btl_tcp_if_exclude lo</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">docker0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">veth_def_agent \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      /opt/nccl</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">tests/build/all_reduce_perf \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">b 8 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">e 2G \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">f 2 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">g 1 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">c 5 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">w 5 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">n 100</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  else</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo &quot;Worker nodes&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  fi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">kubernetes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">pod_config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">resources</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">limits</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token key atrule" style="color:#00a4db">nvidia.com/gpu</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token key atrule" style="color:#00a4db">vpc.amazonaws.com/efa</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">32</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">requests</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token key atrule" style="color:#00a4db">nvidia.com/gpu</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token key atrule" style="color:#00a4db">vpc.amazonaws.com/efa</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">32</span><br></span></code></pre></div></div></div></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/EKS Blueprints/Integrations/Ray"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Ray</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/category/slurm-blueprints"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">SLURM Blueprints</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#setup-skypilot" class="table-of-contents__link toc-highlight">Setup SkyPilot</a><ul><li><a href="#install-skypilot-with-kubernetes-support" class="table-of-contents__link toc-highlight">Install SkyPilot with Kubernetes Support</a></li><li><a href="#connect-to-your-sagemaker-hyperpod-eks-cluster" class="table-of-contents__link toc-highlight">Connect to Your SageMaker HyperPod EKS Cluster</a></li><li><a href="#verify-skypilots-connection-to-the-kubernetes-cluster" class="table-of-contents__link toc-highlight">Verify SkyPilot&#39;s Connection to the Kubernetes Cluster</a></li><li><a href="#discover-available-gpus-in-the-cluster" class="table-of-contents__link toc-highlight">Discover Available GPUs in the Cluster</a></li></ul></li><li><a href="#using-skypilot-interactively" class="table-of-contents__link toc-highlight">Using SkyPilot interactively</a><ul><li><a href="#launch-an-interactive-development-environment" class="table-of-contents__link toc-highlight">Launch an Interactive Development Environment</a></li></ul></li><li><a href="#launching-training-jobs-using-skypilot" class="table-of-contents__link toc-highlight">Launching training jobs using SkyPilot</a></li><li><a href="#creating-and-submitting-your-training-job" class="table-of-contents__link toc-highlight">Creating and submitting your training job</a><ul><li><a href="#running-multi-node-training-jobs-with-efa" class="table-of-contents__link toc-highlight">Running Multi-node Training Jobs with EFA</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/Introduction">Workshop</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/aws-samples/awsome-distributed-training" target="_blank" rel="noopener noreferrer" class="footer__link-item">Awsome Distributed Training<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://aws.amazon.com/sagemaker/ai/hyperpod" target="_blank" rel="noopener noreferrer" class="footer__link-item">Amazon Sagemaker Hyperpod<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://repost.aws" target="_blank" rel="noopener noreferrer" class="footer__link-item">AWS re:Post<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://aws.training" target="_blank" rel="noopener noreferrer" class="footer__link-item">AWS Training &amp; Certification<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://github.com/awslabs/ai-on-sagemaker-hyperpod" target="_blank" rel="noopener noreferrer" class="footer__link-item">AWSome Distributed Training repository<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 ML Frameworks. Built with ❤️ at AWS.</div></div></div></footer></div>
</body>
</html>